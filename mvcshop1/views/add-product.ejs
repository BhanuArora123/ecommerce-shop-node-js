<%- include("./layouts/head.ejs") %>

  <body>
    <!-- Optional JavaScript; choose one of the two! -->
    <%- include("./layouts/nav.ejs",loggedIn) %>
    <% if(errors.length != 0){ %>
      <% errors.forEach((error) => { %>
        <div class="alert alert-danger alert-dismissible fade show d-flex justify-content-center mb-0 mt-0" role="alert">
          <%= error.msg %>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      <% }) %>
    <% } %>
      <div class="d-flex flex-column justify-content-around align-items-center progress formBody">
        <!-- <h4>Search a title ,keyword or anything related to a product</h4> -->
        <form class=" mt-3 w-50 d-flex flex-column justify-content-around h-100" action="/products" method="POST" enctype="multipart/form-data">
          <div class="container">
            <label for="Product">
              <h5>Product</h5>
            </label>
            <% if(editProd=="true" ){ %>
              <input id="Product" class="<%= errors.find(e => {return e.param == 'title'}) != undefined ? 'text-danger border-danger form-control danger':'form-control danger' %>" type="text"
                placeholder="Product Name" aria-label="Recipient's username" aria-describedby="button-addon2"
                name="title" value="<%= prodObj.title %>" />
              <% } else { %>
                <input id="Product" class="<%= errors.find(e => {return e.param == 'title'}) != undefined ? 'text-danger border-danger form-control danger':'form-control danger' %>" type="text"
                  placeholder="Product Name" aria-label="Recipient's username" aria-describedby="button-addon2"
                  name="title" value="<%= oldInput.title %>"/>
                <% } %>
          </div>
          <div class="container">
            <label for="formFile">
              <h5>Image URL</h5>
            </label>
            <% if(editProd=="true" ) { %>
              <input id="formFile" class="<%= errors.find(e => {return e.param == 'imageurl'}) != undefined ? 'text-danger border-danger form-control':'form-control' %>" type="file"
                aria-label="Recipient's username" name="imageurl" value="<%= prodObj.imageurl %>" />
              <% } else { %>
                <input id="formFile" class="<%= errors.find(e => {return e.param == 'imageurl'}) != undefined ? 'text-danger border-danger form-control':'form-control' %>" type="file"
                  aria-label="Recipient's username" name="imageurl" value="<%= oldInput.imageurl %>"/>
                <% } %>
          </div>
          <div class="container">
            <label for="ProductDesc">
              <h5>Product Description</h5>
            </label>
            <% if(editProd=="true" ) { %>
              <input id="ProductDesc" class="<%= errors.find(e => {return e.param == 'description'}) != undefined ? 'text-danger border-danger form-control danger1':'form-control danger1' %>"  type="text"
                aria-label="Recipient's username" name="description" value="<%= prodObj.description %>" />
              <% } else { %>
                <input id="ProductDesc" class="<%= errors.find(e => {return e.param == 'description'}) != undefined ? 'text-danger border-danger form-control danger1':'form-control danger1' %>" type="text"
                  aria-label="Recipient's username" name="description" value="<%= oldInput.description %>"/>
                <% } %>
          </div>
          <div class="container">
            <label for="Price">
              <h5>Price</h5>
            </label>
            <% if(editProd=="true" ){ %>
              <input id="Price" class="<%= errors.find(e => {return e.param == 'price'}) != undefined ? 'text-danger border-danger form-control danger':'form-control danger' %>" type="number"
                placeholder="Product Price" aria-label="Recipient's username" aria-describedby="button-addon2"
                name="price" value="<%= prodObj.price %>" />
              <% } else { %>
                <input id="Price" class="<%= errors.find(e => {return e.param == 'price'}) != undefined ? 'text-danger border-danger form-control danger':'form-control danger' %>"  type="number"
                  placeholder="Product Price" aria-label="Recipient's username" aria-describedby="button-addon2"
                  name="price" value="<%= oldInput.price %>"/>
                <% } %>
                  <% if(editProd=="true" ){ %>
                    <input type="hidden" name="id" value="<%= prodObj._id %>">
                    <% } %>
                    <input type="hidden" name="editProd" value="<%= editProd %>">
          </div>
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <div class="container d-flex justify-content-center align-items-center">
            <% if(editProd == "true"){ %>
              <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Edit Product</button>
            <% } else {%>
              <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Add Product</button>
            <% }%>
          </div>
        </form>
      </div>
      <!-- Option 1: Bootstrap Bundle with Popper -->
      <%- include("./layouts/end.ejs") %>
        <!-- Option 2: Separate Popper and Bootstrap JS -->
        <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
  -->
  </body>

  </html>